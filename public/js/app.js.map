{"version":3,"sources":["js/app.js"],"names":["addSplashBg","toastr","options","typingTimer","doneTypingInterval","$input","$","isWeather","loader","isLoaderShown","show","hide","getuserlocation","success","position","getWeather","error","console","log","navigator","geolocation","getCurrentPosition","on","e","preventDefault","val","html","callWitAi","msg","ajax","url","data","method","response","attributes","key","responseDiv","document","querySelector","value","cords","append","convertTemp","temp","printValues","obj","printObj","warning","coords","latitude","longitude","dataObj","JSON","parse","err","printLocation","params","unsplashUrl","fetch","then","json","returned_data","number","Math","floor","random","css","urls","full"],"mappings":"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","file":"app.js","sourcesContent":["// TO DO : add in babel refactor using es6 classes \n\n\n(function () {\n\n    // add bg in the door \n    addSplashBg();\n\n    // toastr options \n    toastr.options = {\n        \"closeButton\": false,\n        \"debug\": false,\n        \"newestOnTop\": false,\n        \"progressBar\": false,\n        \"positionClass\": \"toast-top-right\",\n        \"preventDuplicates\": true,\n        \"onclick\": null,\n        \"showDuration\": \"1000\",\n        \"hideDuration\": \"1000\",\n        \"timeOut\": \"5000\",\n        \"extendedTimeOut\": \"1000\",\n        \"showEasing\": \"swing\",\n        \"hideEasing\": \"linear\",\n        \"showMethod\": \"fadeIn\",\n        \"hideMethod\": \"fadeOut\"\n    }\n\n\n    var typingTimer, //timer identifier\n        doneTypingInterval = 1000, //time in ms, 5 second for example\n        $input = $('#input'),\n        isWeather = false;\n        \n    function loader(isLoaderShown){\n        if(isLoaderShown){   \n            $(\".loader\").show();\n        }\n        else if(isLoaderShown === false){\n            $(\".loader\").hide();\n        }\n    }\n    function getuserlocation() {\n        function success(position) {\n                if(isWeather){\n                    getWeather(position);\n                }\n                else{\n                    return position;\n                }\n            }\n            function error() {\n                console.log(\"Unable to retrieve your location\");\n            }\n            return navigator.geolocation.getCurrentPosition(success, error);\n        }\n\n    // event listener and handler for submit button\n    $(\".nlp-app__submitBtn\").on(\"click\",function(e){\n        e.preventDefault();\n        toastr.success($(\".nlp__inputText\").val())\n        loader(true);\n        $(\"#responde\").html(\"\");\n        callWitAi($(\".nlp__inputText\").val());\n        \n    })\n    \n    function callWitAi(msg) {\n        $.ajax({\n            url: '/goToWit/',\n            data: {\n                'q': msg\n            },\n            method: 'GET',\n            success: function (response) {\n                if (response.attributes) {\n                    loader(false);\n                    for (key in response.attributes) {\n                        // print all the local info returned from the api\n                        // $(\"#responde\").append(\"<div class='panel panel-default'><p class='panel-body'>\" + \"<b>\" + key + \":</b> \" + response.attributes[key] + \"</p></div>\").fadeIn(\"slow\");\n                        var responseDiv = document.querySelector(\"#responde\");\n                    }\n                }\n                else if (response[0].value == \"weather\") {\n                    var cords;\n                    isWeather = true;\n                    getuserlocation();\n                }\n                else if(response[0].value = \"greeting\"){\n                    $(\"#responde\").append(\"<h1>hello</h1>\")\n                    loader(false);\n                }\n\n            },\n            error: function (error) {\n                console.log(\"error\", error)\n            }\n        });\n    }\n    function convertTemp(temp) {\n        return (9 / 5) * (temp - 273) + 23;\n    };\n    function printValues(obj) {\n        loader(false);\n        $(\"#responde\").html(\"\");\n        for (var key in obj) {\n            if (typeof obj[key] === \"object\" && obj[key] !== null) {\n                printObj(obj[key]);\n            } else {\n                $(\"#responde\").append(key + \":\" + obj[key] + \"<br/>\");\n              \n                \n            }\n        }\n    }\n    function printObj(obj) {\n        for (var key in obj) {\n            if (typeof obj[key] === \"object\") {\n                printObj(obj[key]);\n            } else {\n                // $(\"#responde\").append(key + \":\" + obj[key] + \"<br/>\");\n                toastr.options = {\n                    \"closeButton\": false,\n                    \"debug\": false,\n                    \"newestOnTop\": false,\n                    \"progressBar\": false,\n                    \"positionClass\": \"toast-top-left\",\n                    \"preventDuplicates\": true,\n                    \"onclick\": null,\n                    \"showDuration\": \"1000\",\n                    \"hideDuration\": \"1000\",\n                    \"timeOut\": \"5000\",\n                    \"extendedTimeOut\": \"1000\",\n                    \"showEasing\": \"swing\",\n                    \"hideEasing\": \"linear\",\n                    \"showMethod\": \"fadeIn\",\n                    \"hideMethod\": \"fadeOut\"\n                }\n                toastr.warning(key + \":\" + obj[key])\n            }\n        }\n    }\n    function getWeather(coords) {\n        $.ajax({\n            url: '/getWeather/',\n            data: {\n                'lat': coords.coords.latitude,\n                'lon': coords.coords.longitude,\n            },\n            success: function (data) {\n                let dataObj = JSON.parse(data);\n                console.log(\"weather data object\", dataObj)\n                printValues(dataObj);\n            },\n\n            error: function (err) {\n                console.log(\"error\", err);\n            }\n        });\n    };\n    function printLocation(coords) {\n        $(\"#responde\").html(`<strong>Latitude:</strong> ${coords.latitude} <br /> <strong>Longitude:</strong> ${coords.longitude} `);\n    }\n\n\n    function addSplashBg(params) {\n        let unsplashUrl = \"/getSplashBg/\";\n\n        fetch(unsplashUrl)\n    \n        .then(function (response) {\n                return response.json();\n            })\n\n        .then(function (returned_data) {\n\n            let number = Math.floor(Math.random() * 10) + 1;\n            $('body').css('background-image', 'url(' + returned_data[number].urls.full + ')');\n        });\n    }\n})();"]}